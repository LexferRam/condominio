(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{78:function(e,t,n){e.exports=n(89)},89:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10),c=n.n(o),l=n(19),i=function(e){return console.log(e),fetch("https://condominiolx.herokuapp.com/user/login",{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return 401!==e.status?e.json().then((function(e){return e})):{isAuthenticated:!1,user:{username:"",role:""}}}))},s=function(e){return console.log(e),fetch("https://condominiolx.herokuapp.com/user/register",{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return e}))},u=function(){return fetch("https://condominiolx.herokuapp.com/user/logout").then((function(e){return e.json()})).then((function(e){return e}))},m=function(){return fetch("https://condominiolx.herokuapp.com/user/authenticated").then((function(e){return 401!==e.status?e.json().then((function(e){return e})):{isAuthenticated:!1,user:{username:"",role:""}}}))},d=n(11),h=n(120),p=n(122),f=Object(h.a)((function(e){return{root:{display:"flex",justifyItems:"center",alignItems:"center"}}})),E=Object(a.createContext)(),g=n(125),b=n(126),j=n(124),v=n(127),y=n(57),O=n.n(y),x=Object(h.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})),w=function(e){var t=x(),n=Object(a.useContext)(E),o=n.isAuthenticated,c=n.user,i=n.setIsAuthenticated,s=n.setUser;return r.a.createElement("div",{className:t.root},r.a.createElement(g.a,{position:"static"},r.a.createElement(b.a,null,r.a.createElement(v.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu"},r.a.createElement(O.a,null)),o?r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{color:"inherit"},r.a.createElement(l.b,{to:"/home",style:{color:"white",textDecoration:"none"}},"Home"," ")),r.a.createElement(j.a,{color:"inherit"}," ",r.a.createElement(l.b,{to:"/todos",style:{color:"white",textDecoration:"none"}},"Tareas")),"admin"===c.role?r.a.createElement(j.a,{color:"inherit"},r.a.createElement(l.b,{to:"/admin",style:{color:"white",textDecoration:"none"}},"Admin"," ")):null,r.a.createElement(j.a,{type:"button",className:"btn btn-link nav-item nav-link",style:{color:"white"},onClick:function(){window.confirm("Seguro que desea salir??")&&u().then((function(e){e.success&&(s(e.user),i(!1))}))}},"Salir")):r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{color:"inherit"},r.a.createElement(l.b,{to:"/login",style:{color:"white",textDecoration:"none"}},"Ingresar")),r.a.createElement(j.a,{color:"inherit"},r.a.createElement(l.b,{to:"/register",style:{color:"white",textDecoration:"none"}},"Registrarse"))))))},C=n(9),N=n(42),S=n(134),k=n(130),A=n(132),D=n(128),I=n(131),T=n(133),U=n(43),W=n.n(U),B=n(93),R=n(129),q=n(21),F=function(e){var t="alert ";return e.message.msgError?t+="alert-danger":t+="alert-primary",t+" text-center"},P=function(e){return r.a.createElement("div",{className:F(e),role:"alert"},e.message.msgBody)};function z(){return r.a.createElement(B.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(D.a,{color:"inherit",href:"https://material-ui.com/"},"Your Website")," ",(new Date).getFullYear(),".")}var J=Object(h.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),Y=function(e){var t=J(),n=Object(q.f)(),o=Object(a.useState)({username:"",password:""}),c=Object(d.a)(o,2),l=c[0],s=c[1],u=Object(a.useState)(null),m=Object(d.a)(u,2),h=m[0],p=m[1],f=Object(a.useContext)(E),g=function(e){s(Object(N.a)({},l,Object(C.a)({},e.target.name,e.target.value)))};return r.a.createElement(R.a,{component:"main",maxWidth:"xs"},r.a.createElement(k.a,null),r.a.createElement("div",{className:t.paper},r.a.createElement(S.a,{className:t.avatar},r.a.createElement(W.a,null)),r.a.createElement(B.a,{component:"h1",variant:"h5"},"Ingresar"),r.a.createElement("form",{className:t.form,onSubmit:function(t){t.preventDefault(),i(l).then((function(t){console.log(t);var n=t.isAuthenticated,a=t.user,r=t.message;n?(f.setUser(a),f.setIsAuthenticated(n),e.history.push("/todos")):p(r)}))},noValidate:!0},r.a.createElement(A.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"Username",name:"username",onChange:function(e){return g(e)},autoFocus:!0}),r.a.createElement(A.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",onChange:function(e){return g(e)},label:"Password",type:"password",id:"password",autoComplete:"current-password"}),r.a.createElement(j.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Ingresar"),r.a.createElement(I.a,{container:!0},r.a.createElement(I.a,{item:!0},r.a.createElement(D.a,{href:"#",variant:"body2",onClick:function(){return n.push("/register")}},"No tiene cuenta? Registrarse")))),h?r.a.createElement(P,{message:h}):null),r.a.createElement(T.a,{mt:8},r.a.createElement(z,null)))},H=function(){var e=Object(a.useContext)(E),t=e.user,n=e.isAuthenticated;return r.a.createElement("div",null,n?r.a.createElement("h1",null,"Home Page, welcome ",t.username):r.a.createElement("h1",null,"Home Page"))},_=function(e){return r.a.createElement("li",null,e.todo.name)},G=function(){return fetch("https://condominiolx.herokuapp.com/user/todos").then((function(e){return 401!==e.status?e.json().then((function(e){return e})):{message:{msgBody:"UnAuthorized",msgError:!0}}}))},V=function(e){return fetch("https://condominiolx.herokuapp.com/user/todo",{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return 401!==e.status?e.json().then((function(e){return e})):{message:{msgBody:"UnAuthorized"},msgError:!0}}))},X=function(){return fetch("https://condominiolx.herokuapp.com/user/users").then((function(e){return 401!==e.status?e.json().then((function(e){return e})):{message:{msgBody:"UnAuthorized",msgError:!0}}}))},K=function(e){return fetch("https://condominiolx.herokuapp.com/user/usersDelete/".concat(e),{method:"post",headers:{"Content-Type":"application/json"}}).then((function(e){return 401!==e.status?e.json().then((function(e){return e})):{message:{msgBody:"UnAuthorized",msgError:!0}}}))},L=function(e){var t=Object(a.useState)({name:""}),n=Object(d.a)(t,2),o=n[0],c=n[1],l=Object(a.useState)([]),i=Object(d.a)(l,2),s=i[0],u=i[1],m=Object(a.useState)(null),h=Object(d.a)(m,2),p=h[0],f=h[1],g=Object(a.useContext)(E);Object(a.useEffect)((function(){G().then((function(e){u(e.todos)}))}),[]);var b=function(){c({name:""})};return r.a.createElement("div",{className:"container"},r.a.createElement("ul",{className:"list-group"},s.map((function(e){return r.a.createElement(_,{key:e._id,todo:e})}))),r.a.createElement("br",null),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),V(o).then((function(e){var t=e.message;b(),t.msgError?"UnAuthorized"===t.msgBody?(f(t),g.setUser({username:"",role:""}),g.setIsAuthenticated(!1)):f(t):G().then((function(e){u(e.todos),f(t)}))}))}},r.a.createElement("label",{htmlFor:"todo"},"Enter Todo"),r.a.createElement("input",{type:"text",name:"todo",value:o.name,onChange:function(e){c({name:e.target.value})},className:"form-control",placeholder:"Please Enter Todo"}),r.a.createElement("button",{className:"btn btn-lg btn-primary btn-block",type:"submit"},"Submit")),p?r.a.createElement(P,{message:p}):null)};function M(){return r.a.createElement(B.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(D.a,{color:"inherit",href:"https://material-ui.com/"},"Your Website")," ",(new Date).getFullYear(),".")}var Q=Object(h.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}})),Z=function(e){var t=Q(),n=Object(a.useState)({username:"",password:"",role:""}),o=Object(d.a)(n,2),c=o[0],l=o[1],i=Object(a.useState)(null),u=Object(d.a)(i,2),m=(u[0],u[1]),h=Object(a.useRef)(null),p=Object(q.f)();Object(a.useEffect)((function(){return function(){clearTimeout(h)}}),[]);var f=function(e){l(Object(N.a)({},c,Object(C.a)({},e.target.name,e.target.value)))};return r.a.createElement(R.a,{component:"main",maxWidth:"xs"},r.a.createElement(k.a,null),r.a.createElement("div",{className:t.paper},r.a.createElement(S.a,{className:t.avatar},r.a.createElement(W.a,null)),r.a.createElement(B.a,{component:"h1",variant:"h5"},"Registrarse"),r.a.createElement("form",{className:t.form,onSubmit:function(t){t.preventDefault(),s(c).then((function(t){var n=t.message;m(n),l({username:"",password:"",role:""}),n.msgError||(h=setTimeout((function(){e.history.push("/login")}),1500))}))},noValidate:!0},r.a.createElement(I.a,{container:!0,spacing:2},r.a.createElement(I.a,{item:!0,xs:12,sm:6},r.a.createElement(A.a,{autoComplete:"fname",name:"username",variant:"outlined",required:!0,fullWidth:!0,id:"username",label:"Username",value:c.username,onChange:f,autoFocus:!0})),r.a.createElement(I.a,{item:!0,xs:12,sm:6},r.a.createElement(A.a,{variant:"outlined",required:!0,fullWidth:!0,id:"password",label:"Password",name:"password",value:c.password,onChange:f,autoComplete:"lname"})),r.a.createElement(I.a,{item:!0,xs:12},r.a.createElement(A.a,{variant:"outlined",required:!0,fullWidth:!0,id:"role",label:"Role(admin/user)",name:"role",value:c.role,onChange:f,autoComplete:"role"}))),r.a.createElement(j.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Registrarse"),r.a.createElement(I.a,{container:!0,justify:"flex-end"},r.a.createElement(I.a,{item:!0},r.a.createElement(D.a,{href:"#",variant:"body2",onClick:function(){return p.push("/login")}},"Ya tiene una cuenta? Ingresar"))))),r.a.createElement(T.a,{mt:5},r.a.createElement(M,null)))},$=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],o=t[1];Object(a.useEffect)((function(){X().then((function(e){o(e)}))}),[n]);return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Admin Page"),r.a.createElement("h2",null,"Usuarios del sistema"),r.a.createElement("ol",{className:"list-group"},n.map((function(e){return r.a.createElement("li",{className:"alert alert-primary ",key:e._id},r.a.createElement("b",null,"Username: "),e.username,"--",r.a.createElement("b",null," Role: "),e.role,"---",r.a.createElement("button",{className:"btn btn-danger",onClick:function(){var t;window.confirm("Seguro que desea eliminar a ".concat(e.username,"??"))&&(t=e._id,K(t))}},"X"))}))))},ee=n(2),te=function(e){var t=e.component,n=e.roles,o=Object(ee.a)(e,["component","roles"]),c=Object(a.useContext)(E),l=c.isAuthenticated,i=c.user;return r.a.createElement(q.b,Object.assign({},o,{render:function(e){return l?n.includes(i.role)?r.a.createElement(t,e):r.a.createElement(q.a,{to:{pathname:"/",state:{from:e.location}}}):r.a.createElement(q.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},ne=function(e){var t=e.component,n=Object(ee.a)(e,["component"]),o=Object(a.useContext)(E).isAuthenticated;return r.a.createElement(q.b,Object.assign({},n,{render:function(e){return o?r.a.createElement(q.a,{to:{pathname:"/",state:{from:e.location}}}):r.a.createElement(t,e)}}))};var ae=function(){return r.a.createElement(l.a,null,r.a.createElement(w,null),r.a.createElement(q.b,{exact:!0,path:"/",component:Y}),r.a.createElement(ne,{path:"/login",component:Y}),r.a.createElement(ne,{path:"/register",component:Z}),r.a.createElement(te,{path:"/todos",roles:["user","admin"],component:L}),r.a.createElement(te,{path:"/home",roles:["user","admin"],component:H}),r.a.createElement(te,{path:"/admin",roles:["admin"],component:$}))};c.a.render(r.a.createElement((function(e){var t=e.children,n=f(),o=Object(a.useState)(null),c=Object(d.a)(o,2),l=c[0],i=c[1],s=Object(a.useState)(!1),u=Object(d.a)(s,2),h=u[0],g=u[1],b=Object(a.useState)(!1),j=Object(d.a)(b,2),v=j[0],y=j[1];return Object(a.useEffect)((function(){m().then((function(e){i(e.user),g(e.isAuthenticated),y(!0)}))}),[]),r.a.createElement("div",null,v?r.a.createElement(E.Provider,{value:{user:l,setUser:i,isAuthenticated:h,setIsAuthenticated:g}},t):r.a.createElement("div",{className:n.root},r.a.createElement(p.a,null)))}),null,r.a.createElement(ae,null)),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.b484dc5a.chunk.js.map